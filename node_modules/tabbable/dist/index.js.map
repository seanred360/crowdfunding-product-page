{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["const candidateSelectors = [\n  'input',\n  'select',\n  'textarea',\n  'a[href]',\n  'button',\n  '[tabindex]',\n  'audio[controls]',\n  'video[controls]',\n  '[contenteditable]:not([contenteditable=\"false\"])',\n  'details>summary:first-of-type',\n  'details',\n];\nconst candidateSelector = /* #__PURE__ */ candidateSelectors.join(',');\n\nconst matches =\n  typeof Element === 'undefined'\n    ? function () {}\n    : Element.prototype.matches ||\n      Element.prototype.msMatchesSelector ||\n      Element.prototype.webkitMatchesSelector;\n\nconst getCandidates = function (el, includeContainer, filter) {\n  let candidates = Array.prototype.slice.apply(\n    el.querySelectorAll(candidateSelector)\n  );\n  if (includeContainer && matches.call(el, candidateSelector)) {\n    candidates.unshift(el);\n  }\n  candidates = candidates.filter(filter);\n  return candidates;\n};\n\nconst isContentEditable = function (node) {\n  return node.contentEditable === 'true';\n};\n\nconst getTabindex = function (node) {\n  const tabindexAttr = parseInt(node.getAttribute('tabindex'), 10);\n\n  if (!isNaN(tabindexAttr)) {\n    return tabindexAttr;\n  }\n\n  // Browsers do not return `tabIndex` correctly for contentEditable nodes;\n  // so if they don't have a tabindex attribute specifically set, assume it's 0.\n  if (isContentEditable(node)) {\n    return 0;\n  }\n\n  // in Chrome, <details/>, <audio controls/> and <video controls/> elements get a default\n  //  `tabIndex` of -1 when the 'tabindex' attribute isn't specified in the DOM,\n  //  yet they are still part of the regular tab order; in FF, they get a default\n  //  `tabIndex` of 0; since Chrome still puts those elements in the regular tab\n  //  order, consider their tab index to be 0.\n  if (\n    (node.nodeName === 'AUDIO' ||\n      node.nodeName === 'VIDEO' ||\n      node.nodeName === 'DETAILS') &&\n    node.getAttribute('tabindex') === null\n  ) {\n    return 0;\n  }\n\n  return node.tabIndex;\n};\n\nconst sortOrderedTabbables = function (a, b) {\n  return a.tabIndex === b.tabIndex\n    ? a.documentOrder - b.documentOrder\n    : a.tabIndex - b.tabIndex;\n};\n\nconst isInput = function (node) {\n  return node.tagName === 'INPUT';\n};\n\nconst isHiddenInput = function (node) {\n  return isInput(node) && node.type === 'hidden';\n};\n\nconst isDetailsWithSummary = function (node) {\n  const r =\n    node.tagName === 'DETAILS' &&\n    Array.prototype.slice\n      .apply(node.children)\n      .some((child) => child.tagName === 'SUMMARY');\n  return r;\n};\n\nconst getCheckedRadio = function (nodes, form) {\n  for (let i = 0; i < nodes.length; i++) {\n    if (nodes[i].checked && nodes[i].form === form) {\n      return nodes[i];\n    }\n  }\n};\n\nconst isTabbableRadio = function (node) {\n  if (!node.name) {\n    return true;\n  }\n  const radioScope = node.form || node.ownerDocument;\n\n  const queryRadios = function (name) {\n    return radioScope.querySelectorAll(\n      'input[type=\"radio\"][name=\"' + name + '\"]'\n    );\n  };\n\n  let radioSet;\n  if (\n    typeof window !== 'undefined' &&\n    typeof window.CSS !== 'undefined' &&\n    typeof window.CSS.escape === 'function'\n  ) {\n    radioSet = queryRadios(window.CSS.escape(node.name));\n  } else {\n    try {\n      radioSet = queryRadios(node.name);\n    } catch (err) {\n      // eslint-disable-next-line no-console\n      console.error(\n        'Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s',\n        err.message\n      );\n      return false;\n    }\n  }\n\n  const checked = getCheckedRadio(radioSet, node.form);\n  return !checked || checked === node;\n};\n\nconst isRadio = function (node) {\n  return isInput(node) && node.type === 'radio';\n};\n\nconst isNonTabbableRadio = function (node) {\n  return isRadio(node) && !isTabbableRadio(node);\n};\n\nconst isHidden = function (node, displayCheck) {\n  if (getComputedStyle(node).visibility === 'hidden') {\n    return true;\n  }\n\n  const isDirectSummary = matches.call(node, 'details>summary:first-of-type');\n  const nodeUnderDetails = isDirectSummary ? node.parentElement : node;\n  if (matches.call(nodeUnderDetails, 'details:not([open]) *')) {\n    return true;\n  }\n  if (!displayCheck || displayCheck === 'full') {\n    while (node) {\n      if (getComputedStyle(node).display === 'none') {\n        return true;\n      }\n      node = node.parentElement;\n    }\n  } else if (displayCheck === 'non-zero-area') {\n    const { width, height } = node.getBoundingClientRect();\n    return width === 0 && height === 0;\n  }\n\n  return false;\n};\n\nconst isNodeMatchingSelectorFocusable = function (options, node) {\n  if (\n    node.disabled ||\n    isHiddenInput(node) ||\n    isHidden(node, options.displayCheck) ||\n    /* For a details element with a summary, the summary element gets the focused  */\n    isDetailsWithSummary(node)\n  ) {\n    return false;\n  }\n  return true;\n};\n\nconst isNodeMatchingSelectorTabbable = function (options, node) {\n  if (\n    !isNodeMatchingSelectorFocusable(options, node) ||\n    isNonTabbableRadio(node) ||\n    getTabindex(node) < 0\n  ) {\n    return false;\n  }\n  return true;\n};\n\nconst tabbable = function (el, options) {\n  options = options || {};\n\n  const regularTabbables = [];\n  const orderedTabbables = [];\n\n  const candidates = getCandidates(\n    el,\n    options.includeContainer,\n    isNodeMatchingSelectorTabbable.bind(null, options)\n  );\n\n  candidates.forEach(function (candidate, i) {\n    const candidateTabindex = getTabindex(candidate);\n    if (candidateTabindex === 0) {\n      regularTabbables.push(candidate);\n    } else {\n      orderedTabbables.push({\n        documentOrder: i,\n        tabIndex: candidateTabindex,\n        node: candidate,\n      });\n    }\n  });\n\n  const tabbableNodes = orderedTabbables\n    .sort(sortOrderedTabbables)\n    .map((a) => a.node)\n    .concat(regularTabbables);\n\n  return tabbableNodes;\n};\n\nconst focusable = function (el, options) {\n  options = options || {};\n\n  const candidates = getCandidates(\n    el,\n    options.includeContainer,\n    isNodeMatchingSelectorFocusable.bind(null, options)\n  );\n\n  return candidates;\n};\n\nconst isTabbable = function (node, options) {\n  options = options || {};\n  if (!node) {\n    throw new Error('No node provided');\n  }\n  if (matches.call(node, candidateSelector) === false) {\n    return false;\n  }\n  return isNodeMatchingSelectorTabbable(options, node);\n};\n\nconst focusableCandidateSelector = /* #__PURE__ */ candidateSelectors\n  .concat('iframe')\n  .join(',');\n\nconst isFocusable = function (node, options) {\n  options = options || {};\n  if (!node) {\n    throw new Error('No node provided');\n  }\n  if (matches.call(node, focusableCandidateSelector) === false) {\n    return false;\n  }\n  return isNodeMatchingSelectorFocusable(options, node);\n};\n\nexport { tabbable, focusable, isTabbable, isFocusable };\n"],"names":["candidateSelectors","candidateSelector","join","matches","Element","prototype","msMatchesSelector","webkitMatchesSelector","getCandidates","el","includeContainer","filter","candidates","Array","slice","apply","querySelectorAll","call","unshift","isContentEditable","node","contentEditable","getTabindex","tabindexAttr","parseInt","getAttribute","isNaN","nodeName","tabIndex","sortOrderedTabbables","a","b","documentOrder","isInput","tagName","isHiddenInput","type","isDetailsWithSummary","r","children","some","child","getCheckedRadio","nodes","form","i","length","checked","isTabbableRadio","name","radioScope","ownerDocument","queryRadios","radioSet","window","CSS","escape","err","console","error","message","isRadio","isNonTabbableRadio","isHidden","displayCheck","getComputedStyle","visibility","isDirectSummary","nodeUnderDetails","parentElement","display","getBoundingClientRect","width","height","isNodeMatchingSelectorFocusable","options","disabled","isNodeMatchingSelectorTabbable","tabbable","regularTabbables","orderedTabbables","bind","forEach","candidate","candidateTabindex","push","tabbableNodes","sort","map","concat","focusable","isTabbable","Error","focusableCandidateSelector","isFocusable"],"mappings":"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"}